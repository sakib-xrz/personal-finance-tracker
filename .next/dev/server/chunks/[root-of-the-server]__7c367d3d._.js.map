{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sakib/Downloads/personal-finance-tracker/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined;\r\n};\r\n\r\nfunction createPrismaClient(): PrismaClient {\r\n  if (globalForPrisma.prisma) {\r\n    return globalForPrisma.prisma;\r\n  }\r\n\r\n  // Initialize Prisma Client\r\n  const client = new PrismaClient();\r\n\r\n  if (process.env.NODE_ENV !== \"production\") {\r\n    globalForPrisma.prisma = client;\r\n  }\r\n\r\n  return client;\r\n}\r\n\r\nexport function getPrisma(): PrismaClient {\r\n  return createPrismaClient();\r\n}\r\n\r\nexport default getPrisma;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,kBAAkB;AAIxB,SAAS;IACP,IAAI,gBAAgB,MAAM,EAAE;QAC1B,OAAO,gBAAgB,MAAM;IAC/B;IAEA,2BAA2B;IAC3B,MAAM,SAAS,IAAI,6IAAY;IAE/B,wCAA2C;QACzC,gBAAgB,MAAM,GAAG;IAC3B;IAEA,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT;uCAEe"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sakib/Downloads/personal-finance-tracker/lib/bengali-utils.ts"],"sourcesContent":["// Utility functions for Bengali number conversion\n\nconst bengaliNumerals = [\"০\", \"১\", \"২\", \"৩\", \"৪\", \"৫\", \"৬\", \"৭\", \"৮\", \"৯\"]\n\nexport function toBengaliNumber(num: number | string): string {\n  return String(num)\n    .split(\"\")\n    .map((char) => {\n      const digit = Number.parseInt(char, 10)\n      return isNaN(digit) ? char : bengaliNumerals[digit]\n    })\n    .join(\"\")\n}\n\nexport const bengaliMonths = [\n  \"জানুয়ারি\",\n  \"ফেব্রুয়ারি\",\n  \"মার্চ\",\n  \"এপ্রিল\",\n  \"মে\",\n  \"জুন\",\n  \"জুলাই\",\n  \"আগস্ট\",\n  \"সেপ্টেম্বর\",\n  \"অক্টোবর\",\n  \"নভেম্বর\",\n  \"ডিসেম্বর\",\n]\n\nexport const bengaliWeekdays = [\"রবি\", \"সোম\", \"মঙ্গল\", \"বুধ\", \"বৃহঃ\", \"শুক্র\", \"শনি\"]\n\nexport const bengaliWeekdaysShort = [\"র\", \"সো\", \"ম\", \"বু\", \"বৃ\", \"শু\", \"শ\"]\n"],"names":[],"mappings":"AAAA,kDAAkD;;;;;;;;;;;AAElD,MAAM,kBAAkB;IAAC;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;CAAI;AAEnE,SAAS,gBAAgB,GAAoB;IAClD,OAAO,OAAO,KACX,KAAK,CAAC,IACN,GAAG,CAAC,CAAC;QACJ,MAAM,QAAQ,OAAO,QAAQ,CAAC,MAAM;QACpC,OAAO,MAAM,SAAS,OAAO,eAAe,CAAC,MAAM;IACrD,GACC,IAAI,CAAC;AACV;AAEO,MAAM,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEM,MAAM,kBAAkB;IAAC;IAAO;IAAO;IAAS;IAAO;IAAQ;IAAS;CAAM;AAE9E,MAAM,uBAAuB;IAAC;IAAK;IAAM;IAAK;IAAM;IAAM;IAAM;CAAI"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sakib/Downloads/personal-finance-tracker/lib/api-utils.ts"],"sourcesContent":["import { TransactionType as PrismaTransactionType, Transaction } from \"@prisma/client\"\r\nimport type { TransactionType } from \"./finance-data\"\r\nimport { bengaliMonths, toBengaliNumber } from \"./bengali-utils\"\r\n\r\n/**\r\n * Convert Prisma enum to TypeScript type\r\n */\r\nexport function prismaTypeToTS(type: PrismaTransactionType): TransactionType {\r\n  switch (type) {\r\n    case \"INCOME\":\r\n      return \"income\"\r\n    case \"EXPENSE\":\r\n      return \"expense\"\r\n    case \"SAVINGS\":\r\n      return \"savings\"\r\n    default:\r\n      return \"income\"\r\n  }\r\n}\r\n\r\n/**\r\n * Convert TypeScript type to Prisma enum\r\n */\r\nexport function tsTypeToPrisma(type: TransactionType): PrismaTransactionType {\r\n  switch (type) {\r\n    case \"income\":\r\n      return \"INCOME\"\r\n    case \"expense\":\r\n      return \"EXPENSE\"\r\n    case \"savings\":\r\n      return \"SAVINGS\"\r\n    default:\r\n      return \"INCOME\"\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate month string from date in Bengali format (e.g., \"জানুয়ারি ২০২৫\")\r\n */\r\nexport function calculateMonthFromDate(date: Date | string): string {\r\n  const dateObj = typeof date === \"string\" ? new Date(date) : date\r\n  const monthIndex = dateObj.getMonth()\r\n  const year = dateObj.getFullYear()\r\n  const bengaliMonth = bengaliMonths[monthIndex]\r\n  const bengaliYear = toBengaliNumber(year)\r\n  return `${bengaliMonth} ${bengaliYear}`\r\n}\r\n\r\n/**\r\n * Convert Prisma Transaction to API Transaction format\r\n */\r\nexport function formatTransaction(prismaTransaction: Transaction) {\r\n  // Handle date conversion - Prisma returns Date object\r\n  const dateString = prismaTransaction.date instanceof Date\r\n    ? prismaTransaction.date.toISOString().split(\"T\")[0]\r\n    : new Date(prismaTransaction.date).toISOString().split(\"T\")[0]\r\n\r\n  return {\r\n    id: prismaTransaction.id,\r\n    title: prismaTransaction.title,\r\n    amount: Number(prismaTransaction.amount),\r\n    date: dateString, // Format as YYYY-MM-DD\r\n    description: prismaTransaction.description,\r\n    type: prismaTypeToTS(prismaTransaction.type),\r\n    month: prismaTransaction.month,\r\n  }\r\n}\r\n\r\n/**\r\n * Convert date from dd/MM/yyyy format to YYYY-MM-DD format\r\n */\r\nexport function convertDateToISO(dateString: string): string {\r\n  // Handle Bengali date format (dd/MM/yyyy) or already ISO format\r\n  if (dateString.includes(\"/\")) {\r\n    const parts = dateString.split(\"/\")\r\n    if (parts.length === 3) {\r\n      const day = parts[0].padStart(2, \"0\")\r\n      const month = parts[1].padStart(2, \"0\")\r\n      const year = parts[2]\r\n      return `${year}-${month}-${day}`\r\n    }\r\n  }\r\n  // If already in ISO format or invalid, return as is\r\n  return dateString\r\n}\r\n\r\n/**\r\n * Convert date from YYYY-MM-DD format to dd/MM/yyyy format\r\n */\r\nexport function convertDateFromISO(dateString: string): string {\r\n  // Handle ISO format (YYYY-MM-DD)\r\n  if (dateString.includes(\"-\") && dateString.length === 10) {\r\n    const parts = dateString.split(\"-\")\r\n    if (parts.length === 3) {\r\n      return `${parts[2]}/${parts[1]}/${parts[0]}`\r\n    }\r\n  }\r\n  // If already in dd/MM/yyyy format or invalid, return as is\r\n  return dateString\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA;;AAKO,SAAS,eAAe,IAA2B;IACxD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAKO,SAAS,eAAe,IAAqB;IAClD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT;YACE,OAAO;IACX;AACF;AAKO,SAAS,uBAAuB,IAAmB;IACxD,MAAM,UAAU,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IAC5D,MAAM,aAAa,QAAQ,QAAQ;IACnC,MAAM,OAAO,QAAQ,WAAW;IAChC,MAAM,eAAe,0IAAa,CAAC,WAAW;IAC9C,MAAM,cAAc,IAAA,4IAAe,EAAC;IACpC,OAAO,GAAG,aAAa,CAAC,EAAE,aAAa;AACzC;AAKO,SAAS,kBAAkB,iBAA8B;IAC9D,sDAAsD;IACtD,MAAM,aAAa,kBAAkB,IAAI,YAAY,OACjD,kBAAkB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAClD,IAAI,KAAK,kBAAkB,IAAI,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAEhE,OAAO;QACL,IAAI,kBAAkB,EAAE;QACxB,OAAO,kBAAkB,KAAK;QAC9B,QAAQ,OAAO,kBAAkB,MAAM;QACvC,MAAM;QACN,aAAa,kBAAkB,WAAW;QAC1C,MAAM,eAAe,kBAAkB,IAAI;QAC3C,OAAO,kBAAkB,KAAK;IAChC;AACF;AAKO,SAAS,iBAAiB,UAAkB;IACjD,gEAAgE;IAChE,IAAI,WAAW,QAAQ,CAAC,MAAM;QAC5B,MAAM,QAAQ,WAAW,KAAK,CAAC;QAC/B,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,MAAM,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YACjC,MAAM,QAAQ,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG;YACnC,MAAM,OAAO,KAAK,CAAC,EAAE;YACrB,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;QAClC;IACF;IACA,oDAAoD;IACpD,OAAO;AACT;AAKO,SAAS,mBAAmB,UAAkB;IACnD,iCAAiC;IACjC,IAAI,WAAW,QAAQ,CAAC,QAAQ,WAAW,MAAM,KAAK,IAAI;QACxD,MAAM,QAAQ,WAAW,KAAK,CAAC;QAC/B,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,OAAO,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE;QAC9C;IACF;IACA,2DAA2D;IAC3D,OAAO;AACT"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sakib/Downloads/personal-finance-tracker/app/api/transactions/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getPrisma } from \"@/lib/prisma\";\r\nimport {\r\n  tsTypeToPrisma,\r\n  formatTransaction,\r\n  calculateMonthFromDate,\r\n} from \"@/lib/api-utils\";\r\nimport { z } from \"zod\";\r\n\r\n// Validation schema\r\nconst createTransactionSchema = z.object({\r\n  title: z.string().min(1, \"শিরোনাম আবশ্যক\"),\r\n  amount: z.number().positive(\"পরিমাণ অবশ্যই ধনাত্মক হতে হবে\"),\r\n  date: z\r\n    .string()\r\n    .regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"তারিখ অবশ্যই YYYY-MM-DD ফরম্যাটে হতে হবে\"),\r\n  description: z.string().min(1, \"বিবরণ আবশ্যক\"),\r\n  type: z.enum([\"income\", \"expense\", \"savings\"], {\r\n    errorMap: () => ({ message: \"অবৈধ লেনদেনের ধরন\" }),\r\n  }),\r\n});\r\n\r\n// GET: Fetch transactions with optional filters\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const type = searchParams.get(\"type\") as \"income\" | \"expense\" | \"savings\" | null;\r\n    const month = searchParams.get(\"month\");\r\n    const description = searchParams.get(\"description\");\r\n\r\n    const where: any = {};\r\n\r\n    if (type && [\"income\", \"expense\", \"savings\"].includes(type)) {\r\n      where.type = tsTypeToPrisma(type);\r\n    }\r\n\r\n    if (month) {\r\n      where.month = month;\r\n    }\r\n\r\n    if (description) {\r\n      where.description = description;\r\n    }\r\n\r\n    const prisma = getPrisma();\r\n    const transactions = await prisma.transaction.findMany({\r\n      where,\r\n      orderBy: {\r\n        date: \"desc\",\r\n      },\r\n    });\r\n\r\n    const formattedTransactions = transactions.map(formatTransaction);\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: formattedTransactions,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Error fetching transactions:\", error);\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: \"লেনদেন আনতে ব্যর্থ হয়েছে\",\r\n        message: error instanceof Error ? error.message : \"অজানা ত্রুটি\",\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n// POST: Create a new transaction\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json();\r\n\r\n    // Validate request body\r\n    const validationResult = createTransactionSchema.safeParse(body);\r\n\r\n    if (!validationResult.success) {\r\n      return NextResponse.json(\r\n        {\r\n          success: false,\r\n          error: \"যাচাইকরণ ব্যর্থ হয়েছে\",\r\n          details: validationResult.error.errors.map((err) => ({\r\n            field: err.path.join(\".\"),\r\n            message: err.message,\r\n          })),\r\n        },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const { title, amount, date, description, type } = validationResult.data;\r\n\r\n    // Calculate month from date\r\n    const month = calculateMonthFromDate(date);\r\n\r\n    // Create transaction in database\r\n    const prisma = getPrisma();\r\n    const transaction = await prisma.transaction.create({\r\n      data: {\r\n        title,\r\n        amount,\r\n        date: new Date(date),\r\n        description,\r\n        type: tsTypeToPrisma(type),\r\n        month,\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(\r\n      {\r\n        success: true,\r\n        data: formatTransaction(transaction),\r\n        message: \"লেনদেন সফলভাবে তৈরি হয়েছে\",\r\n      },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error(\"Error creating transaction:\", error);\r\n    return NextResponse.json(\r\n      {\r\n        success: false,\r\n        error: \"লেনদেন তৈরি করতে ব্যর্থ হয়েছে\",\r\n        message: error instanceof Error ? error.message : \"অজানা ত্রুটি\",\r\n      },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}