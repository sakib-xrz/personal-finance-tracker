{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sakib/Downloads/personal-finance-tracker/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined;\r\n};\r\n\r\n// Prisma Client configuration for Next.js 16 with cache components\r\n// The engineType = \"library\" is set in prisma/schema.prisma\r\n// This ensures Prisma uses the library engine, not the client engine type\r\n\r\n// Lazy initialization to avoid module evaluation issues with Next.js 16 cache components\r\n// Prisma Client is only created when first accessed, not during module evaluation\r\nlet prismaInstance: PrismaClient | undefined;\r\n\r\nfunction getPrismaClient(): PrismaClient {\r\n  if (prismaInstance) {\r\n    return prismaInstance;\r\n  }\r\n\r\n  if (globalForPrisma.prisma) {\r\n    prismaInstance = globalForPrisma.prisma;\r\n    return prismaInstance;\r\n  }\r\n\r\n  prismaInstance = new PrismaClient({\r\n    log:\r\n      process.env.NODE_ENV === \"development\"\r\n        ? [\"query\", \"error\", \"warn\"]\r\n        : [\"error\"],\r\n  });\r\n\r\n  if (process.env.NODE_ENV !== \"production\") {\r\n    globalForPrisma.prisma = prismaInstance;\r\n  }\r\n\r\n  return prismaInstance;\r\n}\r\n\r\n// Export a Proxy that lazily initializes Prisma Client only when accessed\r\n// This prevents module evaluation from triggering Prisma initialization\r\nexport const prisma = new Proxy({} as PrismaClient, {\r\n  get(_target, prop) {\r\n    const client = getPrismaClient();\r\n    const value = (client as any)[prop];\r\n    if (typeof value === \"function\") {\r\n      return value.bind(client);\r\n    }\r\n    return value;\r\n  },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIxB,mEAAmE;AACnE,4DAA4D;AAC5D,0EAA0E;AAE1E,yFAAyF;AACzF,kFAAkF;AAClF,IAAI;AAEJ,SAAS;IACP,IAAI,gBAAgB;QAClB,OAAO;IACT;IAEA,IAAI,gBAAgB,MAAM,EAAE;QAC1B,iBAAiB,gBAAgB,MAAM;QACvC,OAAO;IACT;IAEA,iBAAiB,IAAI,6IAAY,CAAC;QAChC,KACE,uCACI;YAAC;YAAS;YAAS;SAAO,GAC1B;IACR;IAEA,wCAA2C;QACzC,gBAAgB,MAAM,GAAG;IAC3B;IAEA,OAAO;AACT;AAIO,MAAM,SAAS,IAAI,MAAM,CAAC,GAAmB;IAClD,KAAI,OAAO,EAAE,IAAI;QACf,MAAM,SAAS;QACf,MAAM,QAAQ,AAAC,MAAc,CAAC,KAAK;QACnC,IAAI,OAAO,UAAU,YAAY;YAC/B,OAAO,MAAM,IAAI,CAAC;QACpB;QACA,OAAO;IACT;AACF"}}]
}